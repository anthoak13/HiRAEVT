#!/bin/bash

re='^[0-9]+$'

if ! [[ $1 =~ $re ]] ; then
    echo "Error: Invalid run number" >&2; exit 1
fi

#TEMPORARY, contingent on premanent raw/ROOT file locations
#eval '/projects/e16042/ribbit/bin/UnpackerFilter --source=file:///projects/e16042/rawfiles/\
#run-0'$1'-00.evt --sink=file:///dev/null'

#file_evt=$(printf run-%04d-00.evt $1)

for file_evt in $(ls /mnt/misc/daqevents-ro/e15190_2/experiment/run$1/*.evt); do
    eval '/projects/hira/Daniele/RIBbit2-dev/bin/UnpackerFilter --source=file://'$file_evt' --sink=file:///